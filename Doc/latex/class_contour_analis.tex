\hypertarget{class_contour_analis}{\section{Contour\+Analis Class Reference}
\label{class_contour_analis}\index{Contour\+Analis@{Contour\+Analis}}
}


The \hyperlink{class_contour_analis}{Contour\+Analis} class Производит анализ контуров  




{\ttfamily \#include $<$Contour\+Analis.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_contour_analis_afb230c8f15afd848b467916f16c1681a}{Contour\+Analis} ()
\item 
void \hyperlink{class_contour_analis_a8c398a82aced99e9e44b378743652a90}{make\+Analis} (list$<$ \hyperlink{class_storrage}{Storrage} $\ast$ $>$ $\ast$contours)
\begin{DoxyCompactList}\small\item\em make\+Analis Производит анализ контуров и выводит результат распознования в консоль \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
cv\+::\+Mat \hyperlink{class_contour_analis_a8dfbcc0a15123202d1af035f7206d87c}{draw\+Contour} (const vector$<$ cv\+::\+Point $>$ \&contour)
\begin{DoxyCompactList}\small\item\em draw\+Contour Рисует контуры \end{DoxyCompactList}\item 
bool \hyperlink{class_contour_analis_a2e67419653bf28f2bbf6766e2ffa1089}{circle\+Detected} (cv\+::\+Mat \&image\+With\+Contour, vector$<$ cv\+::\+Point $>$ \&contour)
\begin{DoxyCompactList}\small\item\em circle\+Detected Проверяет является ли контур кругом -\/ овалом \end{DoxyCompactList}\item 
bool \hyperlink{class_contour_analis_a1970e01e1762c299753c0d57f0879915}{romb\+Detection} (cv\+::\+Mat \&image\+With\+Contour, vector$<$ cv\+::\+Point $>$ \&contour)
\begin{DoxyCompactList}\small\item\em romb\+Detection определяет является ли контур или ромбом или квадратом или прямоугольником \end{DoxyCompactList}\item 
bool \hyperlink{class_contour_analis_a5c8b79c28a07825f5413cd98640d8dd2}{triagle\+Detection} (cv\+::\+Mat \&image\+With\+Contour, vector$<$ cv\+::\+Point $>$ \&contour)
\begin{DoxyCompactList}\small\item\em triagle\+Detection Определяет является ли полученный контур треугольником \end{DoxyCompactList}\item 
double \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance} (cv\+::\+Point a, cv\+::\+Point b)
\begin{DoxyCompactList}\small\item\em distance Определяет расстояние между двумя точками \end{DoxyCompactList}\item 
void \hyperlink{class_contour_analis_a1a8b2ccb473a901f51cc21339c16c3ea}{Calc\+Probability\+Detection} (double to\+Rect, double to\+Circle, double to\+Triagle)
\begin{DoxyCompactList}\small\item\em Calc\+Probability\+Detection Производит расчет верояности определения знаков исходя из количества найденных контуров для которых функции triagle\+Detection, romb\+Detection, circle\+Detected вернули true;. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
The \hyperlink{class_contour_analis}{Contour\+Analis} class Производит анализ контуров 

Definition at line 11 of file Contour\+Analis.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_contour_analis_afb230c8f15afd848b467916f16c1681a}{\index{Contour\+Analis@{Contour\+Analis}!Contour\+Analis@{Contour\+Analis}}
\index{Contour\+Analis@{Contour\+Analis}!Contour\+Analis@{Contour\+Analis}}
\subsubsection[{Contour\+Analis}]{\setlength{\rightskip}{0pt plus 5cm}Contour\+Analis\+::\+Contour\+Analis (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_contour_analis_afb230c8f15afd848b467916f16c1681a}


Definition at line 318 of file Contour\+Analis.\+cpp.


\begin{DoxyCode}
319 \{
320 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{class_contour_analis_a1a8b2ccb473a901f51cc21339c16c3ea}{\index{Contour\+Analis@{Contour\+Analis}!Calc\+Probability\+Detection@{Calc\+Probability\+Detection}}
\index{Calc\+Probability\+Detection@{Calc\+Probability\+Detection}!Contour\+Analis@{Contour\+Analis}}
\subsubsection[{Calc\+Probability\+Detection}]{\setlength{\rightskip}{0pt plus 5cm}void Contour\+Analis\+::\+Calc\+Probability\+Detection (
\begin{DoxyParamCaption}
\item[{double}]{to\+Rect, }
\item[{double}]{to\+Circle, }
\item[{double}]{to\+Triagle}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{class_contour_analis_a1a8b2ccb473a901f51cc21339c16c3ea}


Calc\+Probability\+Detection Производит расчет верояности определения знаков исходя из количества найденных контуров для которых функции triagle\+Detection, romb\+Detection, circle\+Detected вернули true;. 

Следовательно, вероятность равная 1 означает, что были обнаружены контуры только одного типа, равная 0 означает,что не было распознано контуров или есть одинаковое количество распознанных контуров разных типов 
\begin{DoxyParams}{Parameters}
{\em to\+Rect} & Число обнаружений контура ромб \\
\hline
{\em to\+Circle} & Число обнаружений контура круг \\
\hline
{\em to\+Triagle} & Число обнаружений контура треугольник \\
\hline
\end{DoxyParams}


Definition at line 281 of file Contour\+Analis.\+cpp.


\begin{DoxyCode}
282 \{
283     \textcolor{keywordtype}{double} all = (toRect + toCircle + toTriagle);
284     \textcolor{keywordflow}{if}(all == 0)
285     \{
286         cout << \textcolor{stringliteral}{" N "} <<endl;
287         \textcolor{keywordflow}{return};
288     \}
289 
290     \textcolor{keywordtype}{double} isRect = toRect/all;
291     \textcolor{keywordtype}{double} isCircle = toCircle/all;
292     \textcolor{keywordtype}{double} isTriagle = toTriagle/all;
293 
294     \textcolor{keywordflow}{if}(isCircle > isRect && isCircle > isTriagle)
295     \{
296         cout << \textcolor{stringliteral}{" O "} << isCircle <<endl;
297         \textcolor{keywordflow}{return};
298     \}
299 
300     \textcolor{keywordflow}{if}(isRect > isTriagle && isRect > isCircle)
301     \{
302         cout << \textcolor{stringliteral}{" R "} << isRect <<endl;
303         \textcolor{keywordflow}{return};
304     \}
305 
306     \textcolor{keywordflow}{if}(isTriagle > isRect && isTriagle > isCircle)
307     \{
308         cout << \textcolor{stringliteral}{" D "} << isTriagle<<endl;
309         \textcolor{keywordflow}{return};
310     \}
311 
312     cout << \textcolor{stringliteral}{" N "} <<endl;
313     \textcolor{keywordflow}{return};
314 
315 
316 \}
\end{DoxyCode}
\hypertarget{class_contour_analis_a2e67419653bf28f2bbf6766e2ffa1089}{\index{Contour\+Analis@{Contour\+Analis}!circle\+Detected@{circle\+Detected}}
\index{circle\+Detected@{circle\+Detected}!Contour\+Analis@{Contour\+Analis}}
\subsubsection[{circle\+Detected}]{\setlength{\rightskip}{0pt plus 5cm}bool Contour\+Analis\+::circle\+Detected (
\begin{DoxyParamCaption}
\item[{cv\+::\+Mat \&}]{image\+With\+Contour, }
\item[{vector$<$ cv\+::\+Point $>$ \&}]{contour}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{class_contour_analis_a2e67419653bf28f2bbf6766e2ffa1089}


circle\+Detected Проверяет является ли контур кругом -\/ овалом 


\begin{DoxyParams}{Parameters}
{\em image\+With\+Contour} & Изображение с нарисованным контуром \\
\hline
{\em contour} & Точки контура \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true если распознан как круг иначе false 
\end{DoxyReturn}
В функции используется Hough\+Circles и отнашение площади круга к его окружности

Definition at line 26 of file Contour\+Analis.\+cpp.


\begin{DoxyCode}
27 \{
32     vector<cv::Vec3f> circles;
33     cv::cvtColor(imageWithContour, imageWithContour, CV\_BGR2GRAY);
34 
35     cv::HoughCircles(imageWithContour, circles, cv::HOUGH\_GRADIENT, 1, 1,
36                  100, 30, 10, 300 \textcolor{comment}{// change the last two parameters}
37                                 \textcolor{comment}{// (min\_radius & max\_radius) to detect larger circles}
38                  );
39 
40     \textcolor{keywordflow}{if}(circles.size() != 0) \textcolor{keywordflow}{return} \textcolor{keyword}{true};
41 
42 
43     \textcolor{keywordtype}{double} area = cv::contourArea(contour);
44     \textcolor{keywordtype}{double} len = cv::arcLength(contour,\textcolor{keyword}{false});
45 
46 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tArea: "<<area <<endl;}
47 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tLen: " <<len<< endl;}
48 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tarea/len: " << area/(len*len) <<endl;}
49 
50     \textcolor{keywordflow}{if}(area/(len*len) >= 0.07 && area/(len*len) <= 0.08) \textcolor{keywordflow}{return} \textcolor{keyword}{true};
51     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
52 \}
\end{DoxyCode}
\hypertarget{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{\index{Contour\+Analis@{Contour\+Analis}!distance@{distance}}
\index{distance@{distance}!Contour\+Analis@{Contour\+Analis}}
\subsubsection[{distance}]{\setlength{\rightskip}{0pt plus 5cm}double Contour\+Analis\+::distance (
\begin{DoxyParamCaption}
\item[{cv\+::\+Point}]{a, }
\item[{cv\+::\+Point}]{b}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}


distance Определяет расстояние между двумя точками 


\begin{DoxyParams}{Parameters}
{\em a} & \\
\hline
{\em b} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
расстояние d= sqrt((x2−x1)$^\wedge$2+(y2−y1)$^\wedge$2) 
\end{DoxyReturn}


Definition at line 272 of file Contour\+Analis.\+cpp.


\begin{DoxyCode}
273 \{
274     \textcolor{keywordtype}{double} d = 0;
275     \textcolor{keywordtype}{double} arg1 = std::pow((b.x - a.x), 2);
276     \textcolor{keywordtype}{double} arg2 = std::pow((b.y - a.y), 2);
277     d = std::sqrt(std::fabs(arg1)+std::fabs(arg2));
278     \textcolor{keywordflow}{return} d;
279 \}
\end{DoxyCode}
\hypertarget{class_contour_analis_a8dfbcc0a15123202d1af035f7206d87c}{\index{Contour\+Analis@{Contour\+Analis}!draw\+Contour@{draw\+Contour}}
\index{draw\+Contour@{draw\+Contour}!Contour\+Analis@{Contour\+Analis}}
\subsubsection[{draw\+Contour}]{\setlength{\rightskip}{0pt plus 5cm}cv\+::\+Mat Contour\+Analis\+::draw\+Contour (
\begin{DoxyParamCaption}
\item[{const vector$<$ cv\+::\+Point $>$ \&}]{contour}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{class_contour_analis_a8dfbcc0a15123202d1af035f7206d87c}


draw\+Contour Рисует контуры 


\begin{DoxyParams}{Parameters}
{\em contour} & контуры для отрисовки  \\
\hline
\end{DoxyParams}


Definition at line 3 of file Contour\+Analis.\+cpp.


\begin{DoxyCode}
4 \{
5     \textcolor{comment}{//cout<<"In contour" <<endl;}
6     cv::RNG r;
7 
8     \textcolor{keywordtype}{int} count = 0;
9 
10     cv::Scalar color = cv::Scalar( r.uniform(0, 255),
11                                    r.uniform(0, 255),
12                                    r.uniform(0, 255));
13 
14     cv::Mat drawing = cv::Mat::zeros(700,700,CV\_8UC3);
15     \textcolor{keywordflow}{for}( \textcolor{keywordtype}{int} i = 0; i < contour.size(); i++ )
16     \{
17         cv::line(drawing, contour.at(i),contour.at(i),color);
18     \}
19 
20     \textcolor{comment}{//cv::imshow("Contours: " + std::to\_string(count), drawing);}
21     count++;
22 
23     \textcolor{keywordflow}{return} drawing;
24 \}
\end{DoxyCode}
\hypertarget{class_contour_analis_a8c398a82aced99e9e44b378743652a90}{\index{Contour\+Analis@{Contour\+Analis}!make\+Analis@{make\+Analis}}
\index{make\+Analis@{make\+Analis}!Contour\+Analis@{Contour\+Analis}}
\subsubsection[{make\+Analis}]{\setlength{\rightskip}{0pt plus 5cm}void Contour\+Analis\+::make\+Analis (
\begin{DoxyParamCaption}
\item[{list$<$ {\bf Storrage} $\ast$ $>$ $\ast$}]{contours}
\end{DoxyParamCaption}
)}}\label{class_contour_analis_a8c398a82aced99e9e44b378743652a90}


make\+Analis Производит анализ контуров и выводит результат распознования в консоль 


\begin{DoxyParams}{Parameters}
{\em contours} & Контуры для распознования \\
\hline
\end{DoxyParams}


Definition at line 322 of file Contour\+Analis.\+cpp.


\begin{DoxyCode}
323 \{
324     \textcolor{comment}{//cout << "In ANALIS" <<endl;}
325     \textcolor{keywordtype}{int} i = 0;
326     \textcolor{keywordtype}{int} imageNumber = 0;
327 
328     \textcolor{keywordtype}{double} isRomb = 0;
329     \textcolor{keywordtype}{double} isCircle = 0;
330     \textcolor{keywordtype}{double} isTriagle = 0;
331 
332     \textcolor{keywordflow}{for}(\hyperlink{class_storrage}{Storrage} * stor: *contours)
333     \{
334 \textcolor{comment}{//        cout<< "\(\backslash\)t " << imageNumber <<") Изображение: " << endl;}
335         imageNumber++;
336         \textcolor{keywordflow}{for}(vector<cv::Point> & vec: *stor->getContours())
337         \{
338 \textcolor{comment}{//            cout<<"\(\backslash\)t\(\backslash\)t "<< i <<") Информация о контуре: " << endl;}
339             cv::Mat contourImage = \hyperlink{class_contour_analis_a8dfbcc0a15123202d1af035f7206d87c}{drawContour}(vec);
340             \textcolor{keywordflow}{if}(\hyperlink{class_contour_analis_a2e67419653bf28f2bbf6766e2ffa1089}{circleDetected}(contourImage, vec))
341             \{
342 \textcolor{comment}{//                cout << "\(\backslash\)t\(\backslash\)tКруг" << endl;}
343                 isCircle ++;
344             \}\textcolor{keywordflow}{else}
345 \textcolor{comment}{//                cout << "\(\backslash\)t\(\backslash\)tНЕ Круг" << endl;}
346 
347             \textcolor{keywordflow}{if}(\hyperlink{class_contour_analis_a1970e01e1762c299753c0d57f0879915}{rombDetection}(contourImage, vec))
348             \{
349 \textcolor{comment}{//                cout << "\(\backslash\)t\(\backslash\)tРомб" << endl;}
350                 isRomb ++;
351             \}\textcolor{keywordflow}{else}
352 \textcolor{comment}{//                cout << "\(\backslash\)t\(\backslash\)tНЕ Ромб" << endl;}
353 
354             \textcolor{keywordflow}{if}(\hyperlink{class_contour_analis_a5c8b79c28a07825f5413cd98640d8dd2}{triagleDetection}(contourImage, vec))
355             \{
356 \textcolor{comment}{//                cout << "\(\backslash\)t\(\backslash\)tтреугольник" << endl;}
357                 isTriagle ++;
358             \}\textcolor{keywordflow}{else}
359 \textcolor{comment}{//                cout << "\(\backslash\)t\(\backslash\)tНE треугольник" << endl;}
360 
361             i++;
362         \}
363         i = 0;
364     \}
365 
366 \textcolor{comment}{//    cout << "Это круг на: "<<isCircle<<endl;}
367 \textcolor{comment}{//    cout << "Это ромб на: "<<isRomb<<endl;}
368 \textcolor{comment}{//    cout << "Это треугольник на: "<<isTriagle<<endl;}
369 
370     \hyperlink{class_contour_analis_a1a8b2ccb473a901f51cc21339c16c3ea}{CalcProbabilityDetection}(isRomb, isCircle, isTriagle);
371     \textcolor{comment}{//cv::waitKey();}
372     \textcolor{comment}{//cv::destroyAllWindows();}
373 \}
\end{DoxyCode}
\hypertarget{class_contour_analis_a1970e01e1762c299753c0d57f0879915}{\index{Contour\+Analis@{Contour\+Analis}!romb\+Detection@{romb\+Detection}}
\index{romb\+Detection@{romb\+Detection}!Contour\+Analis@{Contour\+Analis}}
\subsubsection[{romb\+Detection}]{\setlength{\rightskip}{0pt plus 5cm}bool Contour\+Analis\+::romb\+Detection (
\begin{DoxyParamCaption}
\item[{cv\+::\+Mat \&}]{image\+With\+Contour, }
\item[{vector$<$ cv\+::\+Point $>$ \&}]{contour}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{class_contour_analis_a1970e01e1762c299753c0d57f0879915}


romb\+Detection определяет является ли контур или ромбом или квадратом или прямоугольником 


\begin{DoxyParams}{Parameters}
{\em image\+With\+Contour} & Изображение с нарисованным контуром \\
\hline
{\em contour} & Точки контура \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true если контур распознан как ромб 
\end{DoxyReturn}
\begin{DoxyVerb}         A
          o*
         ****
        ******
       ********
      **********
   B o**********o D
      **********
       ********
        ******
         ****
          *o
             C
\end{DoxyVerb}


Определяются точки A,B,C,D Если точки слишком близк то распознаётся как не ромб Расчитываются отрезки A\+B, A\+D, B\+C,C\+D

Вычисляется площадь A\+B\+C\+D cv\+::contour\+Area(contour) Вычисляется площадь по S = 1/2 $\ast$ (A\+C$\ast$\+B\+D) Вычисляется delta = cv\+::contour\+Area(contour)/ S Если delta не ревышает заданного значения то распознаётся как ромб

Definition at line 54 of file Contour\+Analis.\+cpp.


\begin{DoxyCode}
55 \{
82     cv::Point D(0,0);
83     cv::Point C(0,0);
84     cv::Point B(imageWithContour.cols,imageWithContour.rows);
85     cv::Point A(imageWithContour.cols,imageWithContour.rows);
86 
87     \textcolor{keywordflow}{for}(cv::Point & point: contour)
88     \{
89         \textcolor{keywordflow}{if}(point.x > D.x)
90         \{
91             D.x = point.x; D.y = point.y;
92         \}
93 
94         \textcolor{keywordflow}{if}(point.x < B.x)
95         \{
96             B.x = point.x; B.y = point.y;
97         \}
98 
99         \textcolor{keywordflow}{if}(point.y > C.y)
100         \{
101             C.x = point.x; C.y = point.y;
102         \}
103 
104         \textcolor{keywordflow}{if}(point.y < A.y)
105         \{
106             A.x = point.x; A.y = point.y;
107         \}
108     \}
109 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tD element : " << D<< "\(\backslash\)n";}
110 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tA element : " << A<< "\(\backslash\)n";}
111 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tB element : " << B<< "\(\backslash\)n";}
112 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tC element : " << C<< "\(\backslash\)n";}
113 
114     \textcolor{keywordtype}{double} areaOfContour = cv::contourArea(contour);
115 \textcolor{comment}{//    cout<<"\(\backslash\)t\(\backslash\)tareaOfContour" << areaOfContour <<endl;}
116 
117     \textcolor{keywordtype}{double} AB = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(A, B);
118     \textcolor{keywordtype}{double} BC = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(C, B);
119     \textcolor{keywordtype}{double} AD = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(D, A);
120     \textcolor{keywordtype}{double} CD = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(D, C);
121 
122 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tAB " << AB <<endl;}
123 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tBC " << BC <<endl;}
124 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tAD " << AD <<endl;}
125 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tCD " << CD<<endl;}
126 
127     \textcolor{keywordflow}{if}(AB <= 1 || BC <= 1 || CD <= 1 || AD <= 1)
128     \{
129         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
130     \}
131 
132     \textcolor{keywordtype}{double} AC = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(C, A);
133     \textcolor{keywordtype}{double} BD = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(B, D);
134 
135 \textcolor{comment}{//    cout <<"AC " << AC <<endl;}
136 \textcolor{comment}{//    cout <<"BD " << BD <<endl;}
137 
138     \textcolor{keywordflow}{if}(A.y >= (B.y - AC/8) || A.y >= (C.y - AC/8))
139     \{
140         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
141     \}
142 
143     \textcolor{keywordtype}{double} areaOfPoints = (0.5) * (AC*BD);
144 
145 \textcolor{comment}{//    cout << "areaOfContour "<< areaOfContour <<endl;}
146 \textcolor{comment}{//    cout << "areaOfPoints " << areaOfPoints<<endl;}
147 
148     \textcolor{keywordtype}{double} delta = std::fabs(areaOfContour/areaOfPoints);
149 \textcolor{comment}{//    cout << "delta " << delta <<endl;}
150 
151     \textcolor{keywordflow}{if}(delta < 1.0 || delta > 1.2)
152     \{
153         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
154     \}
155 
156     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
157 \}
\end{DoxyCode}
\hypertarget{class_contour_analis_a5c8b79c28a07825f5413cd98640d8dd2}{\index{Contour\+Analis@{Contour\+Analis}!triagle\+Detection@{triagle\+Detection}}
\index{triagle\+Detection@{triagle\+Detection}!Contour\+Analis@{Contour\+Analis}}
\subsubsection[{triagle\+Detection}]{\setlength{\rightskip}{0pt plus 5cm}bool Contour\+Analis\+::triagle\+Detection (
\begin{DoxyParamCaption}
\item[{cv\+::\+Mat \&}]{image\+With\+Contour, }
\item[{vector$<$ cv\+::\+Point $>$ \&}]{contour}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{class_contour_analis_a5c8b79c28a07825f5413cd98640d8dd2}


triagle\+Detection Определяет является ли полученный контур треугольником 


\begin{DoxyParams}{Parameters}
{\em image\+With\+Contour} & Изображение с нарисованным контуром \\
\hline
{\em contour} & Точки контура \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true если контур распознан как треугольник 
\end{DoxyReturn}
\begin{DoxyVerb}    A      H       B
     o*****o******o
      ************
       **********
        ********
         ******
          ****
           **
            o
           C
\end{DoxyVerb}


треугольник A\+B\+C с высотой С\+H Если расстояние между всеми сторонами одинаковое и если H.\+y не выше (A.\+x + B.\+x)/2 белее чем на A\+B/4 то распознаётся как треугольник Если высоты нет то распознаётся как не треугольник

Definition at line 159 of file Contour\+Analis.\+cpp.


\begin{DoxyCode}
160 \{
181     cv::Point A(imageWithContour.cols,imageWithContour.rows);
182     cv::Point B(0,0);
183     cv::Point H(0,0);
184     cv::Point C(0,0);
185 
186     \textcolor{keywordflow}{for}(cv::Point & point: contour)
187     \{
188         \textcolor{keywordflow}{if}(point.x > B.x)
189         \{
190             B.x = point.x; B.y = point.y;
191         \}
192 
193         \textcolor{keywordflow}{if}(point.y > C.y)
194         \{
195             C.x = point.x; C.y = point.y;
196         \}
197 
198         \textcolor{keywordflow}{if}(point.x < A.x)
199         \{
200             A.x = point.x; A.y = point.y;
201         \}
202     \}
203 
204     \textcolor{keywordtype}{int} AB = (int)\hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(B, A);
205 
206     \textcolor{keywordflow}{for}(cv::Point & point: contour)
207     \{
208         \textcolor{keywordflow}{if}(point.x >= (A.x + AB/2) - 5 && point.x <= (B.x - AB/2) + 5)
209         \{
210             \textcolor{keywordtype}{double} dyAB = (A.y + B.y)/2;
211             \textcolor{keywordflow}{if}(point.y <= (A.y + dyAB) && point.y >= (A.y - dyAB))
212             \{
213                 \textcolor{keywordflow}{if}(point.y <= (B.y + dyAB) && point.y >= (B.y - dyAB))
214                 \{
215                    H.x = point.x; H.y = point.y;
216                 \}
217             \}
218 
219         \}
220     \}
221 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tA: " << A<< "\(\backslash\)n";}
222 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tB: " << B<< "\(\backslash\)n";}
223 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tC : " << C<< "\(\backslash\)n";}
224 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tH: " << H<< "\(\backslash\)n";}
225 
226     \textcolor{keywordflow}{if}(H.x == 0 && H.y == 0)
227     \{
228         \textcolor{keywordflow}{return} 0;
229     \}
230 
231     AB = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(B,A);
232     \textcolor{keywordtype}{double} AC = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(A, C);
233     \textcolor{keywordtype}{double} BC = \hyperlink{class_contour_analis_a4f99f88069c6a746805275d21acdf5b2}{distance}(B, C);
234 
235 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tAB: " << AB<< "\(\backslash\)n";}
236 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tAC: " << AC<< "\(\backslash\)n";}
237 \textcolor{comment}{//    cout << "\(\backslash\)t\(\backslash\)tBC : " <<BC<< "\(\backslash\)n";}
238 
239     \textcolor{keywordflow}{if}(AB+AC <= BC || AB+BC <= AC || AC+BC <= AB)
240     \{
241         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
242     \}
243 
244     \textcolor{keywordtype}{double} relAB\_AC = AB/AC;
245     \textcolor{keywordtype}{double} relAB\_BC = AB/BC;
246     \textcolor{keywordtype}{double} relAC\_BC = AC/BC;
247 
248     \textcolor{keywordflow}{if}(relAB\_AC < 0.95 || relAB\_AC >1.05)
249     \{
250         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
251     \}
252 
253     \textcolor{keywordflow}{if}(relAB\_BC < 0.95 || relAB\_BC >1.05)
254     \{
255         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
256     \}
257 
258     \textcolor{keywordflow}{if}(relAC\_BC < 0.95 ||  relAC\_BC >1.05)
259     \{
260         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
261     \}
262 
263 
264 \textcolor{comment}{//    cout << "AB/AC" << AB/AC <<endl;}
265 \textcolor{comment}{//    cout << "AB/BC" << AB/BC <<endl;}
266 \textcolor{comment}{//    cout << "AC/BC" << AC/BC <<endl;}
267 
268     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
269 
270 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/takava/\+Qt\+Creator\+Projects/\+Sign\+Determination/\hyperlink{_contour_analis_8h}{Contour\+Analis.\+h}\item 
/home/takava/\+Qt\+Creator\+Projects/\+Sign\+Determination/\hyperlink{_contour_analis_8cpp}{Contour\+Analis.\+cpp}\end{DoxyCompactItemize}
